# MediaMTX Configuration for HikVision Cameras
# RTSP → WebRTC proxy for browser streaming

logLevel: info
logDestinations: [stdout]

# RTSP Server (receives from HikVision NVR)
rtspAddress: :8554
protocols: [tcp]

# WebRTC Server (serves to browsers via WHEP protocol)
webrtcAddress: :8889
webrtcICEServers: [stun:stun.l.google.com:19302]

# HikVision Camera Paths
# Format: Camera N → RTSP channel N02 (substream for lower bandwidth)
# Source: rtsp://user:pass@host:554/Streaming/channels/N02/

paths:
  # Camera 1: Front Door
  camera_1:
    source: rtsp://spalter:Williams88@spalter.osess.online:10700/Streaming/channels/102/
    sourceOnDemand: yes  # Only connect when browser requests stream
    sourceOnDemandStartTimeout: 10s
    sourceOnDemandCloseAfter: 10s
    runOnDemandStartTimeout: 10s
    runOnDemandCloseAfter: 10s
